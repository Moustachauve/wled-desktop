<mat-card
  appearance="raised"
  class="mat-elevation-z0"
  [ngClass]="{ selected: isSelected }">
  <mat-card-content>
    <mat-card-header class="flex-container">
      <div
        class="connection-status"
        [ngClass]="getConnectionClass()"
        [matTooltip]="getConnectionTooltip()"></div>

      <div class="title-row-action">
        <mat-checkbox
          class="device-checkbox"
          [ngClass]="{ visible: showCheckbox }"
          (change)="onDeviceChecked($event.checked)"
          (click)="$event.stopPropagation()"></mat-checkbox>
        <div class="device-icon" [ngClass]="{ visible: !showCheckbox }">
          <mat-icon
            aria-hidden="true"
            aria-label="Device Icon"
            fontIcon="lightbulb"></mat-icon>
        </div>
      </div>

      <div class="title-row">
        <mat-card-title>
          {{ deviceWithState.displayName() }}
        </mat-card-title>
        <mat-card-subtitle>
          {{ deviceWithState.device.address }}
          <mat-icon
            aria-hidden="false"
            aria-label="Wifi Status"
            fontIcon="network_wifi_3_bar"></mat-icon>
        </mat-card-subtitle>
      </div>
      <div>
        <mat-slide-toggle
          checked="{{ deviceWithState.stateInfo?.state?.isOn }}"
          hideIcon="true"
          (change)="toggleSwitch($event.checked)"
          (click)="$event.stopPropagation()"></mat-slide-toggle>
      </div>
    </mat-card-header>
    <mat-card-actions>
      <mat-slider
        min="0"
        max="255"
        step="1"
        discrete
        (input)="onBrightnessInput($event)"
        (click)="$event.stopPropagation()">
        <input
          matSliderThumb
          value="{{ deviceWithState.stateInfo?.state?.brightness }}"
          [(ngModel)]="brightness" />
      </mat-slider>
    </mat-card-actions>
  </mat-card-content>
</mat-card>
